<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="icon" type="image/png" href="https://nodlock.neocities.org/globe-2.png">
  <title>Nodlock</title>
  <style>
  @font-face {
  font-family: 'Mozilla';
  src: url('https://stickr.neocities.org/MozillaText-Regular.woff') format('woff');
  font-weight: normal;
  font-style: normal;
} 
      @font-face {
  font-family: 'MozHead';
  src: url('https://stickr.neocities.org/MozillaHeadlineExtended-SemiBold.woff') format('woff');
  font-weight: normal;
  font-style: normal;
}
    body { font-family: sans-serif; background: linear-gradient(to right, #222133, #25215e); color: #ffea00; text-align: center; 
    cursor: url('correct-cursor.png') 0 0, auto; }
    #results div {
      margin: 8px 0;
      padding: 10px;
      border: 1px solid rgba(255,255,255,0.5);
      border-radius: 6px;
      background: rgba(34, 33, 51, 0.2);
      text-align: left;
      color: rgba(255,255,255,0.5);
      animation: pulse 3s infinite;
      cursor: url('correct-cursor.png') 0 0, auto;
      
    }
    #results a {
      color: rgba(255,255,255,0.5);
      cursor: url('correct-dark.png') 0 0, auto;
      }
    input { padding: 6px; width: 500px; box-shadow:
        inset 0 2px 5px rgba(20,20,130,0.2),
        inset 0 -2px 5px rgba(0,0,0,0.1),
        0 4px 8px rgba(0,0,0,0.2); height: 40px; border-radius: 30px 0px 0px 30px; background: rgba(0,0,0,0.1); color: white; outline: none;font-family: sans-serif; border: 2px inset rgba(0,0,0,0.1); cursor: url('correct-dark.png') 0 0, auto;}
    input:active {box-shadow: green; border: 1px solid red; outline: none;}
    button { padding: 6px 10px; margin-left: 5px; cursor: url('correct-dark.png') 0 0, auto;}
    .suggestion {
      margin-bottom: 12px;
      font-style: italic;
      color: #555;
    }
    .aero-button {
      position: relative;
      background: linear-gradient(to bottom, #23213f, #23213f);
      border: 1px solid rgba(0,0,0,0.2);
      border-radius: 0px 30px 30px 0px;
      color: #fff;
      font-size: 20px;
      padding: 12px 26px;
      text-shadow: 0 1px 1px rgba(0,0,0,0.3);
      box-shadow:
        inset 0 2px 5px rgba(255,255,255,0.5),
        inset 0 -2px 5px rgba(0,0,0,0.1),
        0 4px 8px rgba(0,0,0,0.2);
      cursor: pointer;
      transition: all 0.2s ease;
      transform: translateY(3px);
      cursor: url('correct-dark.png') 0 0, auto;
    }

    .aero-button::before {
      content: '';
      position: absolute;
      top: 5%;
      left: 10%;
      width: 80%;
      height: 40%;
      background: linear-gradient(to bottom, rgba(255,255,255,0.7), transparent);
      border-radius: 0px 30px 30px 0px;
      pointer-events: none;
    }

    .aero-button:hover {
      transform: scale(1.05);
      box-shadow:
        inset 0 2px 5px rgba(255,255,255,0.6),
        inset 0 -2px 5px rgba(0,0,0,0.15),
        0 6px 12px rgba(0,0,0,0.3);
        
      border: 1px solid #5ec9f8;
      cursor: url('correct-cursor.png') 0 0, auto;
    }
    img {height: 140px;  cursor: url('correct-dark.png') 0 0, auto;}
    h1 {color: #ffea00;
    margin: 40px;}
    a {text-decoration: none;cursor: url('correct-dark.png') 0 0, auto;}
    #conf { transition: 0.5s all ease-in-out;position: fixed;
  bottom: 0;
  right: 0;
  z-index: 999999;
  pointer-events: none;color: rgba(100,100,100,0.2); font-family: sans-serif;}
    #conf:hover {color: rgba(100,100,100,1);}
    @keyframes pulse {
      0% {color: rgba(100,100,100,0.8);}
      50% {color: rgba(100,100,100,1);}
      100% {color: rgba(100,100,100,0.8)}
    }
    #imglogo {transition: 1s all ease-in-out; transform: translateY(29px); opacity: 1; background: black; border-radius: 50%;}
    @keyframes rotate {
      0% {transform: translateY(29px) rotate(0deg);}
      50% {transform: translateY(20px) rotate(180deg);}
      100% {transform: translateY(29px) rotate(360deg);}
    }
    .copyright {
      color: rgba(100,100,100,0.4);
    }
    .wrapper {
  position: relative;
  display: inline-block;
}

.wrapper img {
  display: block;
}

.overlay {
  position: absolute;
  top: 29px;
  left: 0;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;

  background: rgba(0, 0, 40, 0.7);
  color: white;
}

  </style>
</head>
<body>
  <a href="https://nodlock.neocities.org/proto-search/Dark-edition/"><div class="wrapper"><img src="https://raw.githubusercontent.com/venyma/venyma.github.io/refs/heads/main/cursor.png" id="imglogo"><div class="overlay"></div></div><p></p><h1></h1></a>
  <input id="searchBox" type="text" placeholder="Search...">
  <button onclick="doSearch();" class="aero-button" id="aero">âŒ• <small></small></button>

  <div id="results"></div>
  <p class="copyright" id="copy"></p>
  <small id="conf">&copy; Nodlock, Incorporated. All rights reserved.
</small>
 <script>
let data = {};

fetch("https://nodlock.neocities.org/proto-search/search-index2.json")
  .then(res => res.json())
  .then(json => {
    data = json;
    console.log("Data loaded"); 
  })
  .catch(err => console.error("Failed to load data.json:", err));

function levenshtein(a, b) {
  const dp = Array(b.length + 1).fill(0).map(() => Array(a.length + 1).fill(0));
  for (let i = 0; i <= a.length; i++) dp[0][i] = i;
  for (let j = 0; j <= b.length; j++) dp[j][0] = j;
  for (let j = 1; j <= b.length; j++) {
    for (let i = 1; i <= a.length; i++) {
      if (a[i - 1] === b[j - 1]) dp[j][i] = dp[j - 1][i - 1];
      else dp[j][i] = Math.min(
        dp[j - 1][i - 1] + 1,
        dp[j][i - 1] + 1,
        dp[j - 1][i] + 1
      );
    }
  }
  return dp[b.length][a.length];
}

function doSearch() {
  const query = document.getElementById("searchBox").value.toLowerCase().trim();
  const resultDiv = document.getElementById("results");
  resultDiv.innerHTML = "";

  if (!query) {
    resultDiv.innerHTML = "<div>Please enter a search term.</div>";
    return;
  }

  let matchedLinks = [];

  if (data[query]) {
    matchedLinks.push(...data[query]);
  } else {
    let closestKey = null;
    let minDistance = Infinity;
    Object.keys(data).forEach(key => {
      const distance = levenshtein(query, key);
      if (distance < minDistance) {
        minDistance = distance;
        closestKey = key;
      }
    });
    if (closestKey) matchedLinks.push(...data[closestKey]);
  }

  if (matchedLinks.length === 0) {
    resultDiv.innerHTML = "<div>No results found.</div>";
  } else {
    matchedLinks.forEach(item => {
      const div = document.createElement("div");

      if (typeof item === "object" && item.link) {
        div.innerHTML = `<a href="${item.link}">${item.link}</a>`;
        if (item.snippet) {
          const snippetEl = document.createElement("p");
          snippetEl.textContent = item.snippet;
          snippetEl.style.color = "rgba(255,255,255,0.7)";
          snippetEl.style.fontStyle = "italic";
          div.appendChild(snippetEl);
        }
      } else {
        div.innerHTML = `<a href="${item}">${item}</a>`;
      }

      resultDiv.appendChild(div);
    });
  }
}

document.getElementById("searchBox").addEventListener("keypress", function(event) {
  if (event.key === "Enter") {
    event.preventDefault();
    document.getElementById("aero").click();
  }
});
</script>
</body>
</html>
